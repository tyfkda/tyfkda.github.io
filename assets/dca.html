<html>
  <head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex">
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
var Prices = [
  ['2003/01/01', 8713.33],
  ['2003/02/01', 8500.79],
  ['2003/03/01', 8490.4],
  ['2003/04/01', 7986.72],
  ['2003/05/01', 7863.29],
  ['2003/06/01', 8547.17],
  ['2003/07/01', 9278.49],
  ['2003/08/01', 9611.67],
  ['2003/09/01', 10670.18],
  ['2003/10/01', 10361.24],
  ['2003/11/01', 10847.97],
  ['2003/12/01', 10403.27],
  ['2004/01/01', 10825.17],
  ['2004/02/01', 10776.73],
  ['2004/03/01', 11271.12],
  ['2004/04/01', 11683.42],
  ['2004/05/01', 11571.34],
  ['2004/06/01', 11296.76],
  ['2004/07/01', 11896.01],
  ['2004/08/01', 11222.24],
  ['2004/09/01', 11127.35],
  ['2004/10/01', 10985.17],
  ['2004/11/01', 10734.71],
  ['2004/12/01', 10784.25],
  ['2005/01/01', 11517.75],
  ['2005/02/01', 11384.4],
  ['2005/03/01', 11780.53],
  ['2005/04/01', 11723.63],
  ['2005/05/01', 11002.11],
  ['2005/06/01', 11329.67],
  ['2005/07/01', 11630.13],
  ['2005/08/01', 11946.92],
  ['2005/09/01', 12506.97],
  ['2005/10/01', 13525.28],
  ['2005/11/01', 13867.86],
  ['2005/12/01', 15130.5],
  ['2006/01/01', 16361.54],
  ['2006/02/01', 16480.09],
  ['2006/03/01', 15964.46],
  ['2006/04/01', 17333.31],
  ['2006/05/01', 16925.71],
  ['2006/06/01', 15503.74],
  ['2006/07/01', 15571.62],
  ['2006/08/01', 15440.91],
  ['2006/09/01', 16134.25],
  ['2006/10/01', 16254.29],
  ['2006/11/01', 16375.26],
  ['2006/12/01', 16321.78],
  ['2007/01/01', 17353.67],
  ['2007/02/01', 17519.5],
  ['2007/03/01', 17453.51],
  ['2007/04/01', 17028.41],
  ['2007/05/01', 17274.98],
  ['2007/06/01', 17958.88],
  ['2007/07/01', 18146.3],
  ['2007/08/01', 16870.98],
  ['2007/09/01', 16524.93],
  ['2007/10/01', 16845.96],
  ['2007/11/01', 16870.4],
  ['2007/12/01', 15628.97],
  ['2008/01/01', 14691.41],
  ['2008/02/01', 13497.16],
  ['2008/03/01', 12992.18],
  ['2008/04/01', 12656.42],
  ['2008/05/01', 13766.86],
  ['2008/06/01', 14440.14],
  ['2008/07/01', 13463.2],
  ['2008/08/01', 13094.59],
  ['2008/09/01', 12834.18],
  ['2008/10/01', 11368.26],
  ['2008/11/01', 9114.6],
  ['2008/12/01', 8397.22],
  ['2009/01/01', 9043.12],
  ['2009/02/01', 7873.98],
  ['2009/03/01', 7280.15],
  ['2009/04/01', 8351.91],
  ['2009/05/01', 8977.37],
  ['2009/06/01', 9677.75],
  ['2009/07/01', 9939.93],
  ['2009/08/01', 10352.47],
  ['2009/09/01', 10530.06],
  ['2009/10/01', 9978.64],
  ['2009/11/01', 9802.95],
  ['2009/12/01', 9572.2],
  ['2010/01/01', 10654.79],
  ['2010/02/01', 10205.02],
  ['2010/03/01', 10172.06],
  ['2010/04/01', 11244.4],
  ['2010/05/01', 10695.69],
  ['2010/06/01', 9711.83],
  ['2010/07/01', 9191.6],
  ['2010/08/01', 9570.31],
  ['2010/09/01', 8927.02],
  ['2010/10/01', 9404.23],
  ['2010/11/01', 9154.72],
  ['2010/12/01', 9988.05],
  ['2011/01/01', 10398.1],
  ['2011/02/01', 10274.5],
  ['2011/03/01', 10754.03],
  ['2011/04/01', 9708.39],
  ['2011/05/01', 10004.2],
  ['2011/06/01', 9719.61],
  ['2011/07/01', 9868.07],
  ['2011/08/01', 9965.01],
  ['2011/09/01', 9060.8],
  ['2011/10/01', 8545.48],
  ['2011/11/01', 8835.52],
  ['2011/12/01', 8597.38],
  ['2012/01/01', 8560.11],
  ['2012/02/01', 8809.79],
  ['2012/03/01', 9707.37],
  ['2012/04/01', 10109.87],
  ['2012/05/01', 9350.95],
  ['2012/06/01', 8440.25],
  ['2012/07/01', 9003.48],
  ['2012/08/01', 8641.85],
  ['2012/09/01', 8783.89],
  ['2012/10/01', 8796.51],
  ['2012/11/01', 8946.87],
  ['2012/12/01', 9458.18],
  ['2013/01/01', 10688.11],
  ['2013/02/01', 11191.34],
  ['2013/03/01', 11606.38]
];
// Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {'packages':['corechart']});
// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);
// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {
  var have = 0;
  var buy = 10000;
  var n = 0;
  var sum = 0;
  for (var i = 0; i < Prices.length; ++i) {
    var year = parseInt(Prices[i][0].substring(0, 4));
    var month = parseInt(Prices[i][0].substring(5, 7));
    var day = parseInt(Prices[i][0].substring(8, 10));
    Prices[i][0] = new Date(year, month - 1, day);
    var price = Prices[i][1];
    have += Math.floor(buy * 10000 / price);
    n += 1;
    var cost = n * buy;
    sum += price;
    Prices[i][2] = sum / n;
    Prices[i][3] = n * buy;
    Prices[i][4] = have * price / 10000;
  }
  // Create the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('date', '日付');
  data.addColumn('number', '株価');
  data.addColumn('number', '平均株価');
  data.addColumn('number', '取得コスト');
  data.addColumn('number', '評価額');
  data.addRows(Prices);
  // Set chart options
  var options = {'title':'ドルコスト平均法',
                 'backgroundColor': '#f8f8f8',
                 'width':700,
                 'height':480,
                 'hAxis':  {title: '日付', gridlines: {color: '#888', count: 10}, minorGridlines: {color: '#ccc', count:12}},
                 'vAxes': [{title: '日経平均株価', baseline: 0}, {title: '評価額', baseline: 0}],
                 'series': {
                   '2': {'targetAxisIndex': 1},
                   '3': {'targetAxisIndex': 1}
                 }};
  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
  chart.draw(data, options);
  window.console.log(chart);
}
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html>
